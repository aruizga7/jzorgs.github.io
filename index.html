<!DOCTYPE html> 
<html lang="en">
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="SPSS Github Web Page">
	<meta name="author" content="IBM SPSS Group">
  
	<title>IBM  Predictive Extensions @ Github</title>
  
	<link href="./css/bootstrap.css" rel="stylesheet" type='text/css'>
	<link href="./css/style.css" rel="stylesheet" type='text/css'>
	<link id='pnext-css' href='css/common.css' rel='stylesheet' type='text/css' media='screen' />
	<link id='pnext-css' href='css/ibm-style.css' rel='stylesheet' type='text/css' media='screen' />
  </head>
  
  <body>
	<div class="navbar navbar-inverse navbar-fixed-top"> 
	  <!--  FROM THE COMMUNITY   -->
	  <div class="pn-dw-master cf" role="banner"> 
		<div class="fl">
		  <a href="http://www.ibm.com/developerworks/" class="pn-dw-fed-logo">
			<span class="pn-dw-ibm">IBM</span> developerWorks
		  </a>
		  <a class="pn-dw-fed-logo" href="/centers/">Developer Centers</a>
		</div>	
		<div class="fr">
		  <span id="pnext-dw-tab" class="pn-dw-tab">
			<a href="http://www.ibm.com/developerworks/" rel="external">
			  <img alt="dW" src="https://developer.ibm.com/predictiveanalytics/wp-content/themes/projectnext/css/dw-tab.png">
			</a>
		  </span>
		</div>
	  </div>

	  
	  <!--  FROM THE COMMUNITY   -->
	  <div id="pnext-top-menu" class="pn-top-menu links-top-menu" role="navigation" aria-label="Main navigation">
		<div class="flag">
		  <span class="link-home flag-img">
			<a rel="home" class="pn-nav-home" href="https://developer.ibm.com/predictiveanalytics">
			  <img class="pn-logo-image" src="https://github.com/aruizga7/aruizga7.github.io/blob/master/Logo.png?raw=true" alt="SPSS Predictive Analytics">
			</a>
		  </span>
		  <div class="pn-top-menu-container flag-bd flag-expand">
			<ul id="menu-main" class="menu">
			  <li id="menu-item-32" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-32"><a href="https://developer.ibm.com/predictiveanalytics/blog/">Blog</a></li>
			  <li id="menu-item-34" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-34"><a href="https://developer.ibm.com/predictiveanalytics/docs/home-2/">Docs</a></li>
			  <li id="menu-item-43" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-43"><a href="https://developer.ibm.com/predictiveanalytics/downloads/">Downloads</a></li>
			  <li id="menu-item-250" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-250"><a href="https://developer.ibm.com/predictiveanalytics/videos/">Videos</a></li>
			  <li id="menu-item-46" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-46"><a href="https://developer.ibm.com/predictiveanalytics/get-help/">Get Help</a></li>
			  <li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-33"><a href="https://developer.ibm.com/predictiveanalytics/events-2/">Events</a></li>
			</ul>
		  </div>
		  <div class="flag-bd">
			<div class="pn-search">		
			  <form role="search" class="pn-search-form" method="get" id="searchbox_002602540803703215521:pmoyvjwf4xi" action="https://developer.ibm.com/predictiveanalytics/search/">
				<input value="more:more:next" name="hq" type="hidden">
				<label for="pnext-search-input" class="visuallyhidden">Search</label>
				<input placeholder="Search" required="" aria-required="true" id="pnext-search-input" class="pn-search-input pn-nav-search-input fl" name="visual_q" size="70" type="search">
				<input id="pnext-search-input-hidden" name="q" type="hidden">
				<input class="pn-search-submit" type="image" src="https://developer.ibm.com/predictiveanalytics/wp-content/themes/projectnext/css/searchicon.png" height="14" width="14" alt="Go" onclick="(function() {
						var search_input = $('#pnext-search-input');
						var search_actual = $('#pnext-search-input-hidden');
						search_actual.val(search_input.val()+' more:more:next');
						$('#searchbox_002602540803703215521:pmoyvjwf4xi').submit();
						return false;
					})()">
			  </form>
			</div>	
		  </div>  
		</div>
	  </div>
	</div>
  
	
	<!-- Main jumbotron for a primary marketing message or call to action -->
	<div class="main-field">
	  <!-- Side-bar Menu-->
	  <div class="leftsidebar-box">
		<dl class="home">
		  <dt id="home">
			<!--<img src="./images/home.png" style="float: left">-->
			<a style="color:grey" target="_blank" href="https://www.baidu.com/">Home</a>
		  </dt>
		</dl>
		<dl class="contribute">
		  <dt id="contribute"><a style="color:grey" target="_blank" href="https://www.baidu.com/">Contribute</a></dt>
		  <dd style="font-style: italic;color:grey">Refined by</dd>
		</dl>
	  </div>
	  <!--Repository Field-->
	  <div class="repos-field">
		<!--Repository Title-->
		<div class="jumbotron">
		  <div class="container">
			<div style="text-align: center">
			  <h1>
				IBM <span style="font-weight:600; color:#00aed1">SPSS</span> Predictive Analytics Gallery
			  </h1>
			</div>
		  </div>
		</div>	
		<!--Repository Title-->
		<div class="container">
		  <div class="row">
			<div class="col-sm-12 col-md-12 col-lg-12">
			  <div id="wrapper">
				<input id="search" placeholder="Search Our Repos..." style='background-image:url("https://developer.ibm.com/predictiveanalytics/wp-content/themes/projectnext/css/searchicon.png");background-repeat: no-repeat;background-position:200px;'>
				<hr class="hr-style">
			  </div>
			</div>
			<hr>
		  </div>
		</div>
	  </div>
	</div>  
	<footer>
	  <div class="container">
		<p>Â© IBM 2015</p>
	  </div>
	</footer>
	<!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./js/jquery.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/strftime.js"></script>
    <script type="text/javascript" src="orgs.js"></script>
    <script type="text/javascript">

    allrepos = [];
	
    (function ($, undefined) {
	  var repoUrls = {
      };

      function repoUrl(repo) {
        return repoUrls[repo.name] || repo.html_url;
      }   
      
      function repoDescription(repo) {
        desc = repo.description;
        return desc;
      }
	  
	  function SidebarCheckboxState(sub_menu_name)
	  {
		this.sub_menu_name = sub_menu_name;
		this.sub_menu_key_list = [];
		this.sub_menu_value_list = [];
		this.pushSubItem = function(key,value){
		  this.sub_menu_key_list.push(key);
		  this.sub_menu_value_list.push(value);
		};
		this.setCheckState = function(key, check_state){
		  for(var i=0; i<this.sub_menu_key_list.length; i++){
			if (key === this.sub_menu_key_list[i]) {
			  this.sub_menu_value_list[i] = check_state;
			}
		  }
		};
	  }
	  
	  function addAllRepos(allrepos)
      {
		$("#allrepos").empty();
		for (i=0; i < allrepos.length; i++)
		{
		  repo = allrepos[i];
		  
		  if (repo.isShown == false) {
			  continue;
		  }
		  var $item = $("<div>").addClass("card pin col-lg-3 col-md-4"+ (repo.language || '').toLowerCase()+ " "+repo.name.toLowerCase()).appendTo("#allrepos");
		  var $top_layer = $("<div>").attr("id", "top-layer").appendTo($item);

		  var $product_tag = $("<div>").attr("id", "repos-product").text(repo.product).appendTo($top_layer);
		  var $developer_tag = $("<div>").addClass("repos-tag").attr("id", "repos-developer").text(repo["developed-by"]).appendTo($top_layer);
		  $("<br>").appendTo($item);

		  var $repos_name = $("<div>").attr("id", "repos-name").text(repo.name).appendTo($item);
		  
		  var img_url = "https://raw.githubusercontent.com/wujiazhong/"+repo.name+"/master/"+repo.img;
		  var $repo_img = $("<div>").attr("style","height:135px;width:240px;background-image:url('"+img_url+"');margin-bottom:15px;background-repeat: no-repeat").appendTo($item);
		  
		  var $repos_desc = $("<div>").attr("id", "repos-desc").text(repo.description).appendTo($item);
		  $("<hr>").appendTo($item);			
		  
		  var $repos_other_tag_area = $("<div>").attr("id", "repos-other-tag").appendTo($item);
		  var $repos_language = $("<div>").addClass("repos-tag").attr("id", "repos-language").text(repo.language).appendTo($repos_other_tag_area);
		  var $repos_category = $("<div>").addClass("repos-tag").attr("id", "repos-category").text(repo.category).appendTo($repos_other_tag_area);
		  $("<br/>").appendTo($item);
		  
		  var repos_url = "https://github.com/wujiazhong/"+repo.name;
		  var $repos_link =  $("<input>").attr("type", "button").attr("id", "repos-link").attr("onclick","window.open('"+repos_url+"')").attr("value","Go to Repository");
		  $repos_link.mouseover(function(){
			$(this).css("background-color", "#BDBDBD");
		  });
		  $repos_link.mouseout(function(){
			$(this).css("background-color", "#FFFFFF");
		  });
		  $repos_link.appendTo($item)
		}       
      }
	  
	  //create allrepos sorted by name
	  function pushRepo(repos, org) 
      {
      	var left = repos;
		var right = allrepos;
        var result  = [],
        il = 0,
        ir = 0;
        
        while (il < left.length && ir < right.length){
		  if(left[il].name.toLowerCase() < right[ir].name.toLowerCase()){
			result.push(left[il++]);
		  }else {
			result.push(right[ir++]);
		  }
		}
       
		allrepos = result.concat(left.slice(il)).concat(right.slice(ir));
	  }
	  
	  function addRepos(orgs, repos, page) {
		var org = orgs.name;
		repos = repos || [];
		page = page || 1;
		reposcmd = orgs.type === "repo" ? "" : "/repos";
		var url = "https://api.github.com/"+orgs.type+"s/"+org + reposcmd;
		
		
		$.getJSON("./index_info.json", function(index_info){
			if (!Array.isArray(index_info)) {
			  index_info = [].concat(index_info);
			}
			
			if (index_info && index_info.length > 0) {
			  allrepos = allrepos.concat(index_info);
			
			  $.getJSON(url, function (api_info) {//result obtained from github api				
				$.each(allrepos, function (i, repo) {//repo is ith item in repos
				  repo.isShown = true;
				  repo.description = repoDescription(api_info[i]);
				});
				
				allrepos.sort(function (a, b) {
				  if (a.name.toLowerCase() > b.name.toLowerCase()) {return 1;}
				  if (b.name.toLowerCase() > a.name.toLowerCase()) {return -1};
				  return 0;
				});
				addAllRepos(allrepos);
			  });
			}
			
			createSideBar(allrepos);
		});
	  }
	  
	  //Create Repository Field
	  var $item = $("<div id='allrepos'>").addClass("#allrepos").attr("style", "padding-left:15px").appendTo("#wrapper");
	  
	  //orgs has been defined in orgs.js
	  for (var r in orgs)
      {
		addRepos(orgs[r]);
	  }
	  $("<div>").addClass("separator").appendTo("#wrapper");
	  
	  //Create side-bar menu
	  //the check state of each checkbox is saved in side_bar_checkbox_state
	  function createSideBar(allrepos_info){
		$.getJSON("./sidebar.json", function(sidebar_content_table){
		  var side_bar_checkbox_state = {};
		  var i=0;
		  $.each(sidebar_content_table,function(key, val){
			var $cur_dl = $("<dl>").addClass(key.toLowerCase()+"-filter").appendTo(".leftsidebar-box");
			var $cur_a = $("<a>").attr("style","color:grey").attr("href", "#").text(key);
			var $cur_dt = $("<dt>").attr("data-isfolded","false").attr("id",key.toLowerCase()).append($cur_a).appendTo($cur_dl);
			
			var parent_key = key.toLowerCase();
			var item = new SidebarCheckboxState(parent_key);
			$.each(val, function(key, sub_val){
			  var $cur_input = $("<input>").attr("type","checkbox").attr("state","false").attr("style", "float:right; margin-right:10px").attr("key",parent_key).attr("value",sub_val);
			  $("<dd>").attr("id","sidebar-checkbox").text(sub_val).append($cur_input).appendTo($cur_dl);
			  item.pushSubItem(sub_val,"false");
			});
			
			side_bar_checkbox_state[i] = item;
			i += 1;
		  });
		  filterCheckbox(allrepos_info, side_bar_checkbox_state);
		});
	  }
	  
	  //side-bar fold
	  $(".leftsidebar-box").delegate("dt", "click", function(){
		if ($(this).attr("data-isfolded") == "false") {
		  $(this).parent().children("dd").hide();
		  $(this).attr("data-isfolded", "true");
		}
		else if ($(this).attr("data-isfolded") == "true")
		{
		  $(this).parent().children("dd").show();
		  $(this).attr("data-isfolded", "false");
		}
		else
		  $(this).parent().children("dd").show();
		  
	  });
	  function toggleCheckbox(cur_state){
		if (cur_state == "true") {
		  return "false";
		}else{
		  return "true";
		}
	  }
	  
	  //sidebar checkbox
	  function filterCheckbox(allrepos_info, side_bar_checkbox_state){
		$(".leftsidebar-box").delegate("input", "click", function(){
			$(this).attr("state", toggleCheckbox($(this).attr("state")));
			var cur_checked_state = $(this).attr("state");
			var filter_key = $(this).attr("key");
			var filter_value = $(this).attr("value");
			
			$.each(side_bar_checkbox_state, function(sidebar_key, item){
				if (filter_key==item.sub_menu_name)
					item.setCheckState(filter_value, cur_checked_state);
			});
			
			var ZeroCheckedMenuList = getZeroCheckedMenuList();

			if (isNeedResetRepos()) {
				setAllReposIsShown(allrepos_info, true);
			}
			
			else{
			  setAllReposIsShown(allrepos_info,false);
			  
			  $.each(side_bar_checkbox_state, function(key, item){
				  if ($.inArray(item.sub_menu_name, ZeroCheckedMenuList)>=0) {
					  return true;
				  }
				  
			  });
			  
			  var is_repo_shown = true;
			  $.each(allrepos, function(repo_key, repo){
				  is_repo_shown = true;
			  	  var is_repo_checked = false;
				  
				  $.each(side_bar_checkbox_state, function(sidebar_key, item) {
					  is_repo_checked = false;
					  if ($.inArray(item.sub_menu_name, ZeroCheckedMenuList)>=0) {
						  return true;
					  }
					  
					  var checked_list = [];	  
					  for(var i=0; i<item.sub_menu_key_list.length;i++){
						  if (item.sub_menu_value_list[i] == "true") {
							  checked_list.push(item.sub_menu_key_list[i]);
						  }
					  }
					  
					  $.each(checked_list, function(checked_key, checked_item){
						  console.log("checked item: "+checked_item);
						  if (checked_item==repo[item.sub_menu_name]) {
							  is_repo_checked  = true;
							  return false;
						  }
					  });
					  
					  if (!is_repo_checked) {
						  is_repo_shown = false;
						  repo["isShown"] = false;
						  console.log(repo["language"]);
						  return false;
					  }
				  });
				  
				  if (is_repo_shown) {
					  repo["isShown"] = true;
				  }
			  });
			}
			//$.each(allrepos_info, function(key, repo){
			//	console.log(repo["isShown"]);
			//});
			addAllRepos(allrepos_info);
		});
	  }
	  
	  function setAllReposIsShown(repos, isShown){
		$.each(repos, function(repo_key, repo){
		  repo.isShown = isShown;
		});
	  }
	  
	  function isNeedResetRepos(){
		var isChecked = true;
		$(".leftsidebar-box input[type='checkbox']").each(function(){
		  if ($(this).attr("state") == "true") {
			isChecked = false;
		  }
		});
		return isChecked;
	  }
	  
	  function isItemChecked(sub_menu_name){
		var isChecked = false;
		$(".leftsidebar-box input[key='"+sub_menu_name+"']").each(function(){
		  if ($(this).attr("state") == "true") {
			isChecked = true;
		  }
		});
		return isChecked;
	  }
	  
	  function getZeroCheckedMenuList(){
		  var ZeroCheckedMenuList = [];
		  $(".leftsidebar-box dl[class$='filter']").each(function(){
			  var isNochecked = true;
			  $(this).find("input").each(function(){				
				  if ($(this).attr("state") == "true") {
					  isNochecked = false;					  
					  return false;
				  }
			  });
			  if (isNochecked) {
				ZeroCheckedMenuList.push($(this).find("input").attr("key"));
			  } 
		  });
		  //for(var item in ZeroCheckedMenuList)
		  //{console.log(ZeroCheckedMenuList[item]);}
		  return ZeroCheckedMenuList;
	  }
	})(jQuery);

	
	
  $('#search').keyup(function() {
    var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
    $rows = $(".card")
    $rows.show().filter(function() {
      var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
      return !~text.indexOf(val);
    }).hide();
    
    // update repo count here
    n = $rows.length;
    for (r in $rows)
    {
    	row = $rows[r];
    	style = row.style;
    	if (style && style.cssText && style.cssText.match("none"))
    	{
    		n--;
    	}

    }
    
    $rows = $(".updated-card");
    $rows.show().filter(function() {
      var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
      return !~text.indexOf(val);
    }).hide();
    
    m = 4;
    for (r in $rows)
    {
    	row = $rows[r];
    	style = row.style;
    	if (style && style.cssText && style.cssText.match("none"))
    	{
    		m--;
    	}

    }
    
    $(".nrepos").text("("+(n - m)+")");
    

    // ---------------------------------
    // Google Analytics Event Tracking
    // 
    // 
    // usage: add the following attributes to links you want to track:
    //   data-analytics-category=""    REQUIRED  String   Typically the object that was interacted with (e.g. button)
    //   data-analytics-action=""      REQUIRED  String   The type of interaction (e.g. click)
    //   data-analytics-label=""       OPTIONAL  String   Useful for categorizing events (e.g. nav buttons)
    //   data-analytics-value=""       OPTIONAL  Integer  Values must be non-negative. Useful to pass counts (e.g. 4 times)
    //
    // Those are the suggested usages, but you can use the attributes how you want
    // see https://developers.google.com/analytics/devguides/collection/analyticsjs/events for more details
    // 
    // EXAMPLE:
    // <a href="http://ibm.com" data-analytics-category="Leadspace button" data-analytics-action="To ibm.com">Off you go!</a>
    // ---------------------------------
    
    $('body').on('click', 'a[data-analytics-category][data-analytics-action]', function(e){

      // No analytics? Bail.
      if ( ! window.ga )
        return;
      
      // for links to external sources, we need a tiny delay to have a little extra time to send to Google's servers before unload
      // 200ms is about right for enough time
      if (this.hostname && this.hostname !== location.hostname) {
        // Stop the link action
        e.preventDefault();
        
        // setTimeout callback is called in the window scope, so cache the url from the link now
        var url = this.href;
        
        // in 200ms, off you go
        setTimeout(function(){
          document.location = url;        
        },200);
      }
      
      var $el = $(this),
          data = {'hitType': 'event'}; // make a new data object 
          
      // category (required string)
      data['eventCategory'] =  $el.attr('data-analytics-category');
      
      // action (required string)
      data['eventAction'] = $el.attr('data-analytics-action');
      
      // label (optional string)
      if ( $el.attr('data-analytics-label') )
        data['eventLabel'] = $el.attr('data-analytics-label');

      // value (optional int)
      if ( $el.attr('data-analytics-value') )
        data['eventValue'] = parseInt( $el.attr('data-analytics-value') );

      // send the data
      ga('send', data);
      
    });

});
	</script>
  </body>
</html>
